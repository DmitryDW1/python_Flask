<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Создание сайта на Django | Джино • Справка</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Инструкция по созданию Django-приложения">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#de4169">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/spravka/assets/css/0.styles.7466019c.css" as="style"><link rel="preload" href="/spravka/assets/js/app.f3754d94.js" as="script"><link rel="preload" href="/spravka/assets/js/3.8f3c6525.js" as="script"><link rel="preload" href="/spravka/assets/js/2.6ef13eb6.js" as="script"><link rel="preload" href="/spravka/assets/js/27.5213cd04.js" as="script"><link rel="preload" href="/spravka/assets/js/25.f87373f6.js" as="script"><link rel="preload" href="/spravka/assets/js/48.31f7e6c1.js" as="script"><link rel="prefetch" href="/spravka/assets/js/10.3f3fee6d.js"><link rel="prefetch" href="/spravka/assets/js/100.9f3a2251.js"><link rel="prefetch" href="/spravka/assets/js/101.931a0019.js"><link rel="prefetch" href="/spravka/assets/js/102.4618e755.js"><link rel="prefetch" href="/spravka/assets/js/103.6161a57b.js"><link rel="prefetch" href="/spravka/assets/js/104.4a2578aa.js"><link rel="prefetch" href="/spravka/assets/js/105.c3cfdf3a.js"><link rel="prefetch" href="/spravka/assets/js/106.ba7b411c.js"><link rel="prefetch" href="/spravka/assets/js/107.a35527b2.js"><link rel="prefetch" href="/spravka/assets/js/108.3b41e9e8.js"><link rel="prefetch" href="/spravka/assets/js/109.6f190353.js"><link rel="prefetch" href="/spravka/assets/js/11.1cfef4e1.js"><link rel="prefetch" href="/spravka/assets/js/110.31809ed0.js"><link rel="prefetch" href="/spravka/assets/js/111.a5302445.js"><link rel="prefetch" href="/spravka/assets/js/112.03e5ed4c.js"><link rel="prefetch" href="/spravka/assets/js/113.91bd0e54.js"><link rel="prefetch" href="/spravka/assets/js/114.e9f73f13.js"><link rel="prefetch" href="/spravka/assets/js/115.cfa27a31.js"><link rel="prefetch" href="/spravka/assets/js/116.d187477f.js"><link rel="prefetch" href="/spravka/assets/js/117.33ef9caf.js"><link rel="prefetch" href="/spravka/assets/js/118.cd2ca153.js"><link rel="prefetch" href="/spravka/assets/js/119.0438870f.js"><link rel="prefetch" href="/spravka/assets/js/12.beb96a74.js"><link rel="prefetch" href="/spravka/assets/js/120.b4f95db6.js"><link rel="prefetch" href="/spravka/assets/js/121.7677452b.js"><link rel="prefetch" href="/spravka/assets/js/122.80b2ad3a.js"><link rel="prefetch" href="/spravka/assets/js/123.4c411970.js"><link rel="prefetch" href="/spravka/assets/js/124.17c0a23c.js"><link rel="prefetch" href="/spravka/assets/js/125.ea725c27.js"><link rel="prefetch" href="/spravka/assets/js/126.c3575986.js"><link rel="prefetch" href="/spravka/assets/js/127.8fe6f6e5.js"><link rel="prefetch" href="/spravka/assets/js/128.3b10cb44.js"><link rel="prefetch" href="/spravka/assets/js/129.b7c68bb5.js"><link rel="prefetch" href="/spravka/assets/js/13.799124fd.js"><link rel="prefetch" href="/spravka/assets/js/130.dc167a57.js"><link rel="prefetch" href="/spravka/assets/js/131.ea39d636.js"><link rel="prefetch" href="/spravka/assets/js/132.203e1731.js"><link rel="prefetch" href="/spravka/assets/js/133.2bb6c1a1.js"><link rel="prefetch" href="/spravka/assets/js/134.6872d624.js"><link rel="prefetch" href="/spravka/assets/js/135.699bbe04.js"><link rel="prefetch" href="/spravka/assets/js/136.e774cff4.js"><link rel="prefetch" href="/spravka/assets/js/137.d2afb6ea.js"><link rel="prefetch" href="/spravka/assets/js/138.16a58933.js"><link rel="prefetch" href="/spravka/assets/js/139.7f2a37de.js"><link rel="prefetch" href="/spravka/assets/js/14.21df247a.js"><link rel="prefetch" href="/spravka/assets/js/140.0680744d.js"><link rel="prefetch" href="/spravka/assets/js/141.78025718.js"><link rel="prefetch" href="/spravka/assets/js/142.04c5314c.js"><link rel="prefetch" href="/spravka/assets/js/143.fa3082ad.js"><link rel="prefetch" href="/spravka/assets/js/144.87dc1e56.js"><link rel="prefetch" href="/spravka/assets/js/145.151284de.js"><link rel="prefetch" href="/spravka/assets/js/146.21de513a.js"><link rel="prefetch" href="/spravka/assets/js/147.1956fcf8.js"><link rel="prefetch" href="/spravka/assets/js/15.d3aa3a69.js"><link rel="prefetch" href="/spravka/assets/js/16.8dd4938e.js"><link rel="prefetch" href="/spravka/assets/js/17.d6aca954.js"><link rel="prefetch" href="/spravka/assets/js/18.04147c36.js"><link rel="prefetch" href="/spravka/assets/js/19.9079a648.js"><link rel="prefetch" href="/spravka/assets/js/20.07cbf077.js"><link rel="prefetch" href="/spravka/assets/js/21.7fee537c.js"><link rel="prefetch" href="/spravka/assets/js/22.659fdd7c.js"><link rel="prefetch" href="/spravka/assets/js/23.824077dd.js"><link rel="prefetch" href="/spravka/assets/js/24.84c684ba.js"><link rel="prefetch" href="/spravka/assets/js/26.899761c0.js"><link rel="prefetch" href="/spravka/assets/js/28.60233390.js"><link rel="prefetch" href="/spravka/assets/js/29.6592669e.js"><link rel="prefetch" href="/spravka/assets/js/30.464c52d2.js"><link rel="prefetch" href="/spravka/assets/js/31.abfcbdba.js"><link rel="prefetch" href="/spravka/assets/js/32.a2265874.js"><link rel="prefetch" href="/spravka/assets/js/33.a320268c.js"><link rel="prefetch" href="/spravka/assets/js/34.32be1497.js"><link rel="prefetch" href="/spravka/assets/js/35.f8462975.js"><link rel="prefetch" href="/spravka/assets/js/36.522e959e.js"><link rel="prefetch" href="/spravka/assets/js/37.6a5de8b4.js"><link rel="prefetch" href="/spravka/assets/js/38.3ea445d6.js"><link rel="prefetch" href="/spravka/assets/js/39.b95f9839.js"><link rel="prefetch" href="/spravka/assets/js/4.b243086d.js"><link rel="prefetch" href="/spravka/assets/js/40.a8e3dfee.js"><link rel="prefetch" href="/spravka/assets/js/41.1a7275f6.js"><link rel="prefetch" href="/spravka/assets/js/42.5579363d.js"><link rel="prefetch" href="/spravka/assets/js/43.5449210f.js"><link rel="prefetch" href="/spravka/assets/js/44.10ca560c.js"><link rel="prefetch" href="/spravka/assets/js/45.9784089c.js"><link rel="prefetch" href="/spravka/assets/js/46.fb2772d0.js"><link rel="prefetch" href="/spravka/assets/js/47.0398b7e7.js"><link rel="prefetch" href="/spravka/assets/js/49.10875ae4.js"><link rel="prefetch" href="/spravka/assets/js/5.a03e81bb.js"><link rel="prefetch" href="/spravka/assets/js/50.48ad77ed.js"><link rel="prefetch" href="/spravka/assets/js/51.5835ec90.js"><link rel="prefetch" href="/spravka/assets/js/52.07021fde.js"><link rel="prefetch" href="/spravka/assets/js/53.f2d78507.js"><link rel="prefetch" href="/spravka/assets/js/54.4f9aaeb9.js"><link rel="prefetch" href="/spravka/assets/js/55.29607934.js"><link rel="prefetch" href="/spravka/assets/js/56.4c7f4084.js"><link rel="prefetch" href="/spravka/assets/js/57.a7a1e660.js"><link rel="prefetch" href="/spravka/assets/js/58.cf610d50.js"><link rel="prefetch" href="/spravka/assets/js/59.57351fb8.js"><link rel="prefetch" href="/spravka/assets/js/6.f39c804d.js"><link rel="prefetch" href="/spravka/assets/js/60.7fc42e48.js"><link rel="prefetch" href="/spravka/assets/js/61.b69f6d57.js"><link rel="prefetch" href="/spravka/assets/js/62.299928eb.js"><link rel="prefetch" href="/spravka/assets/js/63.077e962a.js"><link rel="prefetch" href="/spravka/assets/js/64.b028ea40.js"><link rel="prefetch" href="/spravka/assets/js/65.47d8da21.js"><link rel="prefetch" href="/spravka/assets/js/66.3c9d9dbe.js"><link rel="prefetch" href="/spravka/assets/js/67.2d17d27f.js"><link rel="prefetch" href="/spravka/assets/js/68.ac6d2d48.js"><link rel="prefetch" href="/spravka/assets/js/69.0db1aee2.js"><link rel="prefetch" href="/spravka/assets/js/7.b82b8d71.js"><link rel="prefetch" href="/spravka/assets/js/70.6b59a38e.js"><link rel="prefetch" href="/spravka/assets/js/71.15acc3ce.js"><link rel="prefetch" href="/spravka/assets/js/72.fd1dbb5a.js"><link rel="prefetch" href="/spravka/assets/js/73.83985f0f.js"><link rel="prefetch" href="/spravka/assets/js/74.57779852.js"><link rel="prefetch" href="/spravka/assets/js/75.50bb36da.js"><link rel="prefetch" href="/spravka/assets/js/76.b036631c.js"><link rel="prefetch" href="/spravka/assets/js/77.63906584.js"><link rel="prefetch" href="/spravka/assets/js/78.f345a081.js"><link rel="prefetch" href="/spravka/assets/js/79.5a2e08f9.js"><link rel="prefetch" href="/spravka/assets/js/8.2d48f621.js"><link rel="prefetch" href="/spravka/assets/js/80.bc666236.js"><link rel="prefetch" href="/spravka/assets/js/81.e8dd8f4e.js"><link rel="prefetch" href="/spravka/assets/js/82.ee777dd6.js"><link rel="prefetch" href="/spravka/assets/js/83.b77eac09.js"><link rel="prefetch" href="/spravka/assets/js/84.d038509a.js"><link rel="prefetch" href="/spravka/assets/js/85.9fc470a5.js"><link rel="prefetch" href="/spravka/assets/js/86.c2e10d07.js"><link rel="prefetch" href="/spravka/assets/js/87.21a20e70.js"><link rel="prefetch" href="/spravka/assets/js/88.d538ed9e.js"><link rel="prefetch" href="/spravka/assets/js/89.9197a1cd.js"><link rel="prefetch" href="/spravka/assets/js/9.d9a14627.js"><link rel="prefetch" href="/spravka/assets/js/90.a831925d.js"><link rel="prefetch" href="/spravka/assets/js/91.1dee67bc.js"><link rel="prefetch" href="/spravka/assets/js/92.d6bec945.js"><link rel="prefetch" href="/spravka/assets/js/93.8a0895ae.js"><link rel="prefetch" href="/spravka/assets/js/94.e998da39.js"><link rel="prefetch" href="/spravka/assets/js/95.9ef61d4c.js"><link rel="prefetch" href="/spravka/assets/js/96.bb0bb25b.js"><link rel="prefetch" href="/spravka/assets/js/97.d7e27a84.js"><link rel="prefetch" href="/spravka/assets/js/98.9c9cb31b.js"><link rel="prefetch" href="/spravka/assets/js/99.e9935557.js">
    <link rel="stylesheet" href="/spravka/assets/css/0.styles.7466019c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="navbar__container"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <span class="logo-wrapper"><a href="https://jino.ru"><img width="72" src="/spravka/assets/img/logo.c9cc96f7.svg" alt="Джино • Справка" class="logo"></a> <a href="/spravka/" class="site-name router-link-active">Справка</a></span> <div class="navbar__search"><!----></div> <div class="navbar__links"><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Разделы" class="dropdown-title"><span class="title">Разделы</span> <span class="arrow down"></span></button> <button type="button" aria-label="Разделы" class="mobile-dropdown-title"><span class="title">Разделы</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spravka/about/" class="nav-link">
  О Джино
</a></li><li class="dropdown-item"><!----> <a href="/spravka/hosting/" class="nav-link router-link-active">
  Хостинг
</a></li><li class="dropdown-item"><!----> <a href="/spravka/domains/" class="nav-link">
  Домены
</a></li><li class="dropdown-item"><!----> <a href="/spravka/spectrum/" class="nav-link">
  Спектр
</a></li><li class="dropdown-item"><!----> <a href="/spravka/vps/" class="nav-link">
  VPS
</a></li><li class="dropdown-item"><!----> <a href="/spravka/landing/" class="nav-link">
  Лендинг
</a></li><li class="dropdown-item"><!----> <a href="/spravka/mail/" class="nav-link">
  Почта
</a></li><li class="dropdown-item"><!----> <a href="/spravka/shop/" class="nav-link">
  Магазин
</a></li></ul></div></div> <!----></nav></div></div></header> <div class="sidebar-mask"></div> <div class="theme-container__wrapper"><aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Разделы" class="dropdown-title"><span class="title">Разделы</span> <span class="arrow down"></span></button> <button type="button" aria-label="Разделы" class="mobile-dropdown-title"><span class="title">Разделы</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spravka/about/" class="nav-link">
  О Джино
</a></li><li class="dropdown-item"><!----> <a href="/spravka/hosting/" class="nav-link router-link-active">
  Хостинг
</a></li><li class="dropdown-item"><!----> <a href="/spravka/domains/" class="nav-link">
  Домены
</a></li><li class="dropdown-item"><!----> <a href="/spravka/spectrum/" class="nav-link">
  Спектр
</a></li><li class="dropdown-item"><!----> <a href="/spravka/vps/" class="nav-link">
  VPS
</a></li><li class="dropdown-item"><!----> <a href="/spravka/landing/" class="nav-link">
  Лендинг
</a></li><li class="dropdown-item"><!----> <a href="/spravka/mail/" class="nav-link">
  Почта
</a></li><li class="dropdown-item"><!----> <a href="/spravka/shop/" class="nav-link">
  Магазин
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Создание сайта на Django</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/spravka/hosting/articles/django_app.html#подготовка-к-работе" class="sidebar-link root">Подготовка к работе</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/spravka/hosting/articles/django_app.html#создание-и-запуск-проекта" class="sidebar-link root">Создание и запуск проекта</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/spravka/hosting/articles/django_app.html#создание-приложения" class="sidebar-link root">Создание приложения</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spravka/hosting/articles/django_app.html#создание-html-шаблона" class="sidebar-link">Создание HTML-шаблона</a></li><li class="sidebar-sub-header"><a href="/spravka/hosting/articles/django_app.html#api" class="sidebar-link">API</a></li><li class="sidebar-sub-header"><a href="/spravka/hosting/articles/django_app.html#отправка-данных-в-шаблон" class="sidebar-link">Отправка данных в шаблон</a></li></ul></li><li><a href="/spravka/hosting/articles/django_app.html#администрирование-приложения" class="sidebar-link root">Администрирование приложения</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spravka/hosting/articles/django_app.html#добавление-городов-на-главную-страницу-сайта" class="sidebar-link">Добавление городов на главную страницу сайта</a></li></ul></li><li><a href="/spravka/hosting/articles/django_app.html#создание-формы-ввода" class="sidebar-link root">Создание формы ввода</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/spravka/hosting/articles/django_app.html#заключение" class="sidebar-link root">Заключение</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="создание-сайта-на-django"><a href="#создание-сайта-на-django" class="header-anchor">#</a> Создание сайта на Django</h1> <p><strong>Django</strong> — фрэймворк для создания сложных и комплексных сайтов на языке Python.</p> <p>В этой статье на примере создания сайта, показывающего погоду в разных городах мира, мы продемонстрируем работу с API, HTML-шаблонами и базами данных в Django.</p> <p>Запускать проект будем на Джино.Хостинге.</p> <h2 id="подготовка-к-работе"><a href="#подготовка-к-работе" class="header-anchor">#</a> Подготовка к работе</h2> <p>Создадим для нашего сайта новый хостинг-контейнер. Для этого в разделе <span target="_blank" class="j-path"><span class="j-path-bit"><span class="j-path-text">Аккаунт</span><svg viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg" class="j-path-arrow"><path fill="currentColor" d="M0.5 3.5C0.223858 3.5 2.98023e-08 3.72386 0 4C0 4.27614 0.223858 4.5 0.5 4.5L0.5 3.5ZM11.9286 4.5C12.2047 4.5 12.4286 4.27614 12.4286 4C12.4286 3.72386 12.2047 3.5 11.9286 3.5V4.5ZM9.40068 0.623712C9.19286 0.441871 8.87698 0.462929 8.69514 0.670748C8.5133 0.878566 8.53436 1.19445 8.74218 1.37629L9.40068 0.623712ZM12.5 4L12.8293 4.37629L13.2593 4L12.8293 3.62371L12.5 4ZM8.74218 6.62371C8.53436 6.80555 8.5133 7.12143 8.69514 7.32925C8.87698 7.53707 9.19286 7.55813 9.40068 7.37629L8.74218 6.62371ZM0.5 4.5L11.9286 4.5V3.5L0.5 3.5L0.5 4.5ZM8.74218 1.37629L12.1707 4.37629L12.8293 3.62371L9.40068 0.623712L8.74218 1.37629ZM12.1707 3.62371L8.74218 6.62371L9.40068 7.37629L12.8293 4.37629L12.1707 3.62371Z"></path></svg></span><span class="j-path-bit"><span class="j-path-text">Хостинг</span><!----></span></span> выберем «Создать новый хостинг». После создания перейдём в раздел «Услуги» и подключим «Поддержку скриптовых языков» и «Поддержку SSH».</p> <p><img src="/spravka/assets/img/deploy_settings.8c8d82ca.png" alt="«settings»"></p> <p>После подключения выбранных услуг подключимся к хостингу по SSH. Данные для SSH-подключения указаны в разделе <span target="_blank" class="j-path"><span class="j-path-bit"><span class="j-path-text">Управление</span><svg viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg" class="j-path-arrow"><path fill="currentColor" d="M0.5 3.5C0.223858 3.5 2.98023e-08 3.72386 0 4C0 4.27614 0.223858 4.5 0.5 4.5L0.5 3.5ZM11.9286 4.5C12.2047 4.5 12.4286 4.27614 12.4286 4C12.4286 3.72386 12.2047 3.5 11.9286 3.5V4.5ZM9.40068 0.623712C9.19286 0.441871 8.87698 0.462929 8.69514 0.670748C8.5133 0.878566 8.53436 1.19445 8.74218 1.37629L9.40068 0.623712ZM12.5 4L12.8293 4.37629L13.2593 4L12.8293 3.62371L12.5 4ZM8.74218 6.62371C8.53436 6.80555 8.5133 7.12143 8.69514 7.32925C8.87698 7.53707 9.19286 7.55813 9.40068 7.37629L8.74218 6.62371ZM0.5 4.5L11.9286 4.5V3.5L0.5 3.5L0.5 4.5ZM8.74218 1.37629L12.1707 4.37629L12.8293 3.62371L9.40068 0.623712L8.74218 1.37629ZM12.1707 3.62371L8.74218 6.62371L9.40068 7.37629L12.8293 4.37629L12.1707 3.62371Z"></path></svg></span><span class="j-path-bit"><span class="j-path-text">Настройки SSH</span><!----></span></span>.</p> <p>Перед первым подключением к хостинг-контейнеру в разделе <span target="_blank" class="j-path"><span class="j-path-bit"><span class="j-path-text">Управление</span><svg viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg" class="j-path-arrow"><path fill="currentColor" d="M0.5 3.5C0.223858 3.5 2.98023e-08 3.72386 0 4C0 4.27614 0.223858 4.5 0.5 4.5L0.5 3.5ZM11.9286 4.5C12.2047 4.5 12.4286 4.27614 12.4286 4C12.4286 3.72386 12.2047 3.5 11.9286 3.5V4.5ZM9.40068 0.623712C9.19286 0.441871 8.87698 0.462929 8.69514 0.670748C8.5133 0.878566 8.53436 1.19445 8.74218 1.37629L9.40068 0.623712ZM12.5 4L12.8293 4.37629L13.2593 4L12.8293 3.62371L12.5 4ZM8.74218 6.62371C8.53436 6.80555 8.5133 7.12143 8.69514 7.32925C8.87698 7.53707 9.19286 7.55813 9.40068 7.37629L8.74218 6.62371ZM0.5 4.5L11.9286 4.5V3.5L0.5 3.5L0.5 4.5ZM8.74218 1.37629L12.1707 4.37629L12.8293 3.62371L9.40068 0.623712L8.74218 1.37629ZM12.1707 3.62371L8.74218 6.62371L9.40068 7.37629L12.8293 4.37629L12.1707 3.62371Z"></path></svg></span><span class="j-path-bit"><span class="j-path-text">Настройки SSH</span><!----></span></span> нужно задать пароль пользователя. Порт для подключения используется стандартный — <strong>22</strong>.</p> <p><img src="/spravka/assets/img/ssh_connect.855940fa.png" alt="«settings»"></p> <p>Также в этом разделе можно настроить ограничение доступа к хостингу только с указанных IP-адресов.</p> <p>После подключения к хостингу по SSH создадим виртуальное окружение для Python:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>/opt/alt/python37/bin/virtualenv --python /opt/alt/python310/bin/python3 weather_venv
</code></pre></div><p>Эта команда создаёт виртуальное окружение <code>weather_venv</code> для Python 3.10. Список всех доступных версий Python и пути к их интерпретаторам указаны в разделе <span target="_blank" class="j-path"><span class="j-path-bit"><span class="j-path-text">Управление</span><svg viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg" class="j-path-arrow"><path fill="currentColor" d="M0.5 3.5C0.223858 3.5 2.98023e-08 3.72386 0 4C0 4.27614 0.223858 4.5 0.5 4.5L0.5 3.5ZM11.9286 4.5C12.2047 4.5 12.4286 4.27614 12.4286 4C12.4286 3.72386 12.2047 3.5 11.9286 3.5V4.5ZM9.40068 0.623712C9.19286 0.441871 8.87698 0.462929 8.69514 0.670748C8.5133 0.878566 8.53436 1.19445 8.74218 1.37629L9.40068 0.623712ZM12.5 4L12.8293 4.37629L13.2593 4L12.8293 3.62371L12.5 4ZM8.74218 6.62371C8.53436 6.80555 8.5133 7.12143 8.69514 7.32925C8.87698 7.53707 9.19286 7.55813 9.40068 7.37629L8.74218 6.62371ZM0.5 4.5L11.9286 4.5V3.5L0.5 3.5L0.5 4.5ZM8.74218 1.37629L12.1707 4.37629L12.8293 3.62371L9.40068 0.623712L8.74218 1.37629ZM12.1707 3.62371L8.74218 6.62371L9.40068 7.37629L12.8293 4.37629L12.1707 3.62371Z"></path></svg></span><span class="j-path-bit"><span class="j-path-text">Техническая информация</span><!----></span></span>.</p> <p>После создания виртуального окружения активируем его</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">source</span> ./weather_venv/bin/activate
</code></pre></div><p>и установим Django с помощью стандартного пакетного менеджера</p> <div class="language-sh extra-class"><pre class="language-sh"><code>pip <span class="token function">install</span> django
</code></pre></div><p>Теперь наше виртуальное окружение готово к работе. Перейдём к созданию проекта.</p> <h2 id="создание-и-запуск-проекта"><a href="#создание-и-запуск-проекта" class="header-anchor">#</a> Создание и запуск проекта</h2> <p>Создавать новый проект будем на локальной машине с последующим деплоем проекта на Хостинг. О том, как подготовить Хостинг к развёртыванию нового проекта и о способах загрузки проекта на сервер можно <a href="/spravka/hosting/articles/deploy.html">прочитать в нашей инструкции</a> по развёртыванию проекта на Джино.Хостинге.</p> <p>Создадим новый проект Django:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>django-admin startproject weather_project
</code></pre></div><p>Эта команда создаст папку <strong>weather_project</strong> со вложенной одноимённой папкой <em>weather_project</em> и файлом <em>manage.py</em>, отвечающим за управление проектом.</p> <p>Уже на данном этапе можно настроить загрузку проекта на сервер и проверить работу пустого Django-проекта. Поскольку наше приложение будет объёмным и в течение работы мы будем несоклько раз обновлять его и изменять, рекомендуем само приложение создавать в IDE VSCode или PyCharm, из которых удобно <a href="/spravka/hosting/articles/deploy_ide.html">настроить выгрузку приложения непосредственно на сервер</a>.</p> <p>После загрузки проекта на хостинг в папку с доменным именем, на котором он будет работать, проверим его работу.</p> <p>Для запуска Django-проекта на Хостинге нужно создать файл <em>passenger_wsgi.py</em>, который будет отвечать за связь проекта с веб-сервером. Содержимое файла должно быть следующим:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sys<span class="token punctuation">,</span> os
INTERP <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>expanduser<span class="token punctuation">(</span><span class="token string">&quot;~/weather_venv/bin/python3&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> sys<span class="token punctuation">.</span>executable <span class="token operator">!=</span> INTERP<span class="token punctuation">:</span> os<span class="token punctuation">.</span>execl<span class="token punctuation">(</span>INTERP<span class="token punctuation">,</span> INTERP<span class="token punctuation">,</span> <span class="token operator">*</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>

<span class="token keyword">from</span> weather_project<span class="token punctuation">.</span>wsgi <span class="token keyword">import</span> application
</code></pre></div><p>Здесь <code>~/weather_venv/bin/python3</code> — путь к виртуальному окружению на хостинге; <code>weather_project.wsgi</code> — указание на основной файл, который будет запускать приложение.</p> <p>Теперь нужно изменить настройки самого нашего проекта, чтобы он мог запускаться на выбранном домене. Для этого в папке <em>weather_project</em> откроем файл <em>settings.py</em> и в строке <code>ALLOWED_HOSTS</code> укажем выбранное доменное имя, например <code>ALLOWED_HOSTS = [</code>example.com<code>]</code>.</p> <p>После этого в разделе <span target="_blank" class="j-path"><span class="j-path-bit"><span class="j-path-text">Управление</span><svg viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg" class="j-path-arrow"><path fill="currentColor" d="M0.5 3.5C0.223858 3.5 2.98023e-08 3.72386 0 4C0 4.27614 0.223858 4.5 0.5 4.5L0.5 3.5ZM11.9286 4.5C12.2047 4.5 12.4286 4.27614 12.4286 4C12.4286 3.72386 12.2047 3.5 11.9286 3.5V4.5ZM9.40068 0.623712C9.19286 0.441871 8.87698 0.462929 8.69514 0.670748C8.5133 0.878566 8.53436 1.19445 8.74218 1.37629L9.40068 0.623712ZM12.5 4L12.8293 4.37629L13.2593 4L12.8293 3.62371L12.5 4ZM8.74218 6.62371C8.53436 6.80555 8.5133 7.12143 8.69514 7.32925C8.87698 7.53707 9.19286 7.55813 9.40068 7.37629L8.74218 6.62371ZM0.5 4.5L11.9286 4.5V3.5L0.5 3.5L0.5 4.5ZM8.74218 1.37629L12.1707 4.37629L12.8293 3.62371L9.40068 0.623712L8.74218 1.37629ZM12.1707 3.62371L8.74218 6.62371L9.40068 7.37629L12.8293 4.37629L12.1707 3.62371Z"></path></svg></span><span class="j-path-bit"><span class="j-path-text">Настройки веб-сервера</span><!----></span></span> для выбранного домена укажем версию Python, которая будет использоваться для работы сайта и нажмём <span class="j-button">Перезагрузить</span>, чтобы перезагрузить веб-сервер и проверить работу нашего проекта.</p> <p>В адресной строке браузера укажем наше доменное имя. Если всё работает правильно, мы увидим стандартную стартовую страницу Django</p> <p><img src="/spravka/assets/img/django_start.8f6dcf4c.png" alt="«django»"></p> <h2 id="создание-приложения"><a href="#создание-приложения" class="header-anchor">#</a> Создание приложения</h2> <p>Вернёмся к нашей IDE и создадим приложение в нашем проекте:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>django-admin startapp weather_app
</code></pre></div><p>Эта команда создаст папку <em>weather_app</em>, в которой уже находятся шаблоны для создания основных файлов нашего приложения.</p> <p>Теперь перейдём в папку <em>weather_app</em> и создадим здесь файл <em>urls.py</em>:</p> <div class="language-vim extra-class"><pre class="language-vim"><code>from django<span class="token operator">.</span>urls import <span class="token builtin">path</span>

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">]</span>
</code></pre></div><p>Этот файл дублирует файл <em>urls.py</em> всего проекта. Основное отличие его в том, что в этом файле будут только те URL, которые относятся к нашему приложению, а не ко всему проекту в целом.</p> <p>Чтобы добавить наше приложение к проекту, добавим его название в список уже установленных приложений проекта. Для этого в папке <em>weather_project</em> откроем файл <em>settings.py</em> и в блок <code>INSTALLED_APPS</code> добавим название нашего приложения:</p> <div class="language-vim extra-class"><pre class="language-vim"><code>…
INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'django.contrib.admin'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.auth'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.contenttypes'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.sessions'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.messages'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.staticfiles'</span><span class="token punctuation">,</span>
    <span class="token string">'weather_app'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
…
</code></pre></div><p>Теперь изменим основной файл <em>urls.py</em>, находящийся в папке <em>weather_project</em>. Мы добавим к нему строку, указывающую на использование нашего нового файла <em>urls.py</em>:</p> <div class="language-vim extra-class"><pre class="language-vim"><code>from django<span class="token operator">.</span>contrib import admin
from django<span class="token operator">.</span>urls import <span class="token builtin">path</span><span class="token punctuation">,</span> <span class="token builtin">include</span>

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token function">path</span><span class="token punctuation">(</span><span class="token string">'admin/'</span><span class="token punctuation">,</span> admin<span class="token operator">.</span>site<span class="token operator">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">path</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'weather.urls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="создание-html-шаблона"><a href="#создание-html-шаблона" class="header-anchor">#</a> Создание HTML-шаблона</h3> <p>Следующим шагом нам нужно создать HTML-шаблон, в который будут экспортироваться полученные по API данные и отображаться на главной странице нашего сайта.</p> <p>Создадим в папке нашего приложения <em>weather_app</em> папку для шаблонов <em>templates</em>. В папке <em>templates</em> создадим папку для шаблонов приложения <em>weather</em> и уже в этой папке создадим файл <em>index.html</em>.</p> <p>Содержимое индексного файла (<code>~/domains/example.com/weather_app/templates/weather/index.html</code>) будет следующим:</p> <details class="custom-block details"><summary>index.html</summary> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>What's the weather like?<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hero is-primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hero-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    What's the weather like?
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>columns<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>column is-offset-4 is-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POST<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>field has-addons<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>control is-expanded<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>City Name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>control<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button is-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                    Add City
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>columns<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>column is-offset-4 is-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>media<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>media-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>figure</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image is-50x50<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://openweathermap.org/img/w/10d.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Image<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>figure</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>media-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Sun City<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subtitle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>59° F<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span> Solar wind with some prominence
                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></details> <p>В Django-проекте основное взаимодействие происходит между файлами <em>views.py</em> приложения и <em>urls.py</em> проекта. Теперь, когда шаблон готов, изменим эти файлы для запуска приложения.</p> <p>Откроем файл <em>views.py</em> и приведём его к следующему виду:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'weather/index.html'</span><span class="token punctuation">)</span> <span class="token comment">#returns the index.html template</span>
</code></pre></div><p>Здесь мы назвали наш основной запрос <em>index</em> и использовали функцию <strong>render</strong> для обращения к файлу шаблона. Теперь добавим url, который будет отправлять запрос к этому шаблону. Откроем файл <em>urls.py</em>, который мы создали в папке с нашим приложением и приведём его к следующему виду:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">#the path for our index view</span>
<span class="token punctuation">]</span>
</code></pre></div><p>Здесь описано перенаправление запроса к файлу <em>views.py</em>, который мы только что изменили.</p> <p>Проверим работу нашего приложения! <a href="/spravka/hosting/articles/deploy_ide.html">Загрузим его на сервер</a> и перезагрузим веб-сервер (<span target="_blank" class="j-path"><span class="j-path-bit"><span class="j-path-text">Управление</span><svg viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg" class="j-path-arrow"><path fill="currentColor" d="M0.5 3.5C0.223858 3.5 2.98023e-08 3.72386 0 4C0 4.27614 0.223858 4.5 0.5 4.5L0.5 3.5ZM11.9286 4.5C12.2047 4.5 12.4286 4.27614 12.4286 4C12.4286 3.72386 12.2047 3.5 11.9286 3.5V4.5ZM9.40068 0.623712C9.19286 0.441871 8.87698 0.462929 8.69514 0.670748C8.5133 0.878566 8.53436 1.19445 8.74218 1.37629L9.40068 0.623712ZM12.5 4L12.8293 4.37629L13.2593 4L12.8293 3.62371L12.5 4ZM8.74218 6.62371C8.53436 6.80555 8.5133 7.12143 8.69514 7.32925C8.87698 7.53707 9.19286 7.55813 9.40068 7.37629L8.74218 6.62371ZM0.5 4.5L11.9286 4.5V3.5L0.5 3.5L0.5 4.5ZM8.74218 1.37629L12.1707 4.37629L12.8293 3.62371L9.40068 0.623712L8.74218 1.37629ZM12.1707 3.62371L8.74218 6.62371L9.40068 7.37629L12.8293 4.37629L12.1707 3.62371Z"></path></svg></span><span class="j-path-bit"><span class="j-path-text">Настройки веб-сервера</span><!----></span></span>). Откроем браузер и проверим страницу нашего сайта:</p> <p><img src="data:image/png;base64,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" alt="«django_app»"></p> <h3 id="api"><a href="#api" class="header-anchor">#</a> API</h3> <p>Для работы нашего приложения, нам будут нужны актуальные данные о погоде в разных городах мира. Получать их мы будем от одного из свободных погодных сервисов — <a href="https://openweathermap.org" target="_blank" rel="noopener noreferrer">Open Weather Map<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Для получения данных по API нам нужно зарегистрироваться на сайте и в личном кабинете получить уникальный ключ, которым будем подписывать запрос</p> <p><img src="/spravka/assets/img/weather_app_api.20134d7c.png" alt="«django_app»"></p> <p>Чтобы проверить работу полученного ключа, можно через бразуер отправить запрос к приложению в следующем формате:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>http://api.openweathermap.org/data/2.5/weather?q<span class="token operator">=</span>Penza<span class="token operator">&amp;</span><span class="token assign-left variable">units</span><span class="token operator">=</span>imperial<span class="token operator">&amp;</span><span class="token assign-left variable">appid</span><span class="token operator">=</span>ваш_API_ключ
</code></pre></div><p>В ответ в браузере должна появиться информация в JSON-формате:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">{</span><span class="token string">&quot;coord&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;lon&quot;</span>:45.0046,<span class="token string">&quot;lat&quot;</span>:53.2007<span class="token punctuation">}</span>,<span class="token string">&quot;weather&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span>:800,<span class="token string">&quot;main&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Clear&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;clear sky&quot;</span>,<span class="token string">&quot;icon&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;01d&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;base&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;stations&quot;</span>,<span class="token string">&quot;main&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;temp&quot;</span>:56.82,<span class="token string">&quot;feels_like&quot;</span>:54.61,<span class="token string">&quot;temp_min&quot;</span>:56.82,<span class="token string">&quot;temp_max&quot;</span>:56.82,<span class="token string">&quot;pressure&quot;</span>:1009,<span class="token string">&quot;humidity&quot;</span>:51<span class="token punctuation">}</span>,<span class="token string">&quot;visibility&quot;</span>:10000,<span class="token string">&quot;wind&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;speed&quot;</span>:5.3,<span class="token string">&quot;deg&quot;</span>:174,<span class="token string">&quot;gust&quot;</span>:8.41<span class="token punctuation">}</span>,<span class="token string">&quot;clouds&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;all&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;dt&quot;</span>:1652067877,<span class="token string">&quot;sys&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span>:2,<span class="token string">&quot;id&quot;</span>:219846,<span class="token string">&quot;country&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;RU&quot;</span>,<span class="token string">&quot;sunrise&quot;</span>:1652058692,<span class="token string">&quot;sunset&quot;</span>:1652114482<span class="token punctuation">}</span>,<span class="token string">&quot;timezone&quot;</span>:10800,<span class="token string">&quot;id&quot;</span>:511565,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Penza&quot;</span>,<span class="token string">&quot;cod&quot;</span>:200<span class="token punctuation">}</span>
</code></pre></div><p>Из этого объёма нам будут нужны только основные сведения. Для этого наше приложение будет конвертировать JSON-формат в формат данных, воспринимаемых Python.</p> <p>Настроим работу запросов и конвертирование полученные данных из JSON-формата в формат данных Python. Для этого добавим в файл <em>views.py</em> строки <code>import requests</code>, <code>url</code>, <code>city</code>, <code>city_weather</code>:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render
<span class="token keyword">import</span> requests

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">'http://api.openweathermap.org/data/2.5/weather?q={}&amp;units=imperial&amp;appid=ваш_API_ключ'</span>

    city <span class="token operator">=</span> <span class="token string">'Penza'</span>

    city_weather <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'weather/index.html'</span><span class="token punctuation">)</span>
</code></pre></div><p>Мы добавили URL, к которому будем отправлять запрос и строку, отвечающую за конвертирование данных из JSON в Python-формат.</p> <p>В нашем случае в URL не указан город, город указан отдельно в строке <code>city</code> и сейчас это <em>Penza</em>. Позже мы исправим это и будем указывать город в базе данных и через специальную форму ввода в самом приложении.</p> <p>Сейчас, когда наше приложение отправляет запрос и получает ответ, можно перейти к отображению полученных данных на нашем сайте.</p> <h3 id="отправка-данных-в-шаблон"><a href="#отправка-данных-в-шаблон" class="header-anchor">#</a> Отправка данных в шаблон</h3> <p>Чтобы отобразить полученные данные на странице сайта, нужно передать их в <em>index.html</em>. Для этого создадим библиотеку значений, данные из которой и будем передавать в шаблон.</p> <p>В файле <em>views.py</em> добавим следующие строки:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    weather <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'city'</span> <span class="token punctuation">:</span> city<span class="token punctuation">,</span>
        <span class="token string">'temperature'</span> <span class="token punctuation">:</span> city_weather<span class="token punctuation">[</span><span class="token string">'main'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'temp'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'description'</span> <span class="token punctuation">:</span> city_weather<span class="token punctuation">[</span><span class="token string">'weather'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'icon'</span> <span class="token punctuation">:</span> city_weather<span class="token punctuation">[</span><span class="token string">'weather'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'icon'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'weather/index.html'</span><span class="token punctuation">)</span> <span class="token comment">#returns the index.html template</span>
</code></pre></div><p>Здесь мы добавили блок <code>weather={}</code>, в котором определили переменные <code>city</code>, <code>temperarute</code>, <code>description</code> и <code>icon</code>. Этим переменным мы присвоили определённые значения из получаемого по API массива данных.</p> <p>Теперь, чтобы передать эти данные в шаблон создадим дополнительную переменную <code>context</code>, которая и будет передавать все данные в шаблон. Здесь же, в файле <em>views.py</em> добавим строки:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    context <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'weather'</span> <span class="token punctuation">:</span> weather<span class="token punctuation">}</span>

    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'weather/index.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token comment">#returns the index.html template</span>
</code></pre></div><p>Переменная <code>context</code> - это словарь, в котором содержатся все данные блока <code>weather</code>.</p> <p>Теперь нужно настроить отображение получаемых данных в самом HTML-шаблоне. Откроем файл <em>index.html</em> и вместо значений, которые на предыдущем шаге задавали вручную вставим значения наших новых переменных, используя <code></code></p> <div class="language-html extra-class"><pre class="language-html"><code>...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>media<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>media-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>figure</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image is-50x50<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://openweathermap.org/img/w/{{ weather.icon }}.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Image<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>figure</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>media-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ weather.city }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subtitle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ weather.temperature }}° F<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span> {{ weather.description }}
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
...
</code></pre></div><p>В данном случае важно помнить, что при вызове переменной из словаря нужно использовать <code>.</code>, а не стандартный синтаксис Python (например, вызов переменной <em>city</em> будет выглядеть как <code>weather.city</code> вместо привычного <code>weather[‘city’]</code>.</p> <p>После внесения необходимых изменений снова обновим наше приложение на сервере и на главной странице нашего сайта увидим, что информация о погоде в указанном городе получена.</p> <p>Следующая «проблема» нашего приложения — указание города. В данном случае он указан напрямую в коде. Это неправильно — сделаем так, чтобы список городов, для которых нужно отображать информацию, хранился в базе данных.</p> <p>Воспользуемся для хранения списка городов <strong>SQLite</strong>, идущей в составе Django. Чтобы добавить города в базу, создадим дополнительную форму в окне администратора приложения.</p> <h2 id="администрирование-приложения"><a href="#администрирование-приложения" class="header-anchor">#</a> Администрирование приложения</h2> <p>Создадим администратора нашего приложения командой:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>python manage.py createsuperuser
</code></pre></div><p>Эта команда запустит процесс создания администратора нашего сайта, в ходе которого мы укажем его основные данные: пароль, адрес электронной почты и т.д.</p> <p>После создания администратора, вход в панель администрирования осуществляется через браузер по адресу <code>http://your_domain/admin</code>.</p> <p>Теперь добавим в список доступных администратору операций возможность создавать список городов. Для этого воспользуемся файлом <em>models.py</em>, который находится в папке нашего приложения. Приведём этот файл к следующему виду:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token keyword">class</span> <span class="token class-name">City</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#show the actual city name on the dashboard</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>name

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span> <span class="token comment">#show the plural of city as cities instead of cities</span>
        verbose_name_plural <span class="token operator">=</span> <span class="token string">'cities'</span>
</code></pre></div><p>Эта директива создаст в базе данных приложения таблицу из одной колонки, которая будет называться «name» и в которой будут храниться названия городов.</p> <p>Чтобы создать эту таблицу в базе, нужно создать связи командой <code>makemigrations</code> и затем на основании этих связей обновить содержимое приложения:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>python manage.py makemigrations
python manage.py migrate
</code></pre></div><p>Таблица в базе создана и готова к заполнению. Чтобы заполнить её, добавим форму ввода города в панель администрирования. Изменим для этого файл <em>admin.py</em> нашего приложения. Привдём его к следующем виду:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> City

admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>City<span class="token punctuation">)</span>

</code></pre></div><p>Теперь в панели администрирования появилась новая форма для ввода городов. Добавим несколько.</p> <h3 id="добавление-городов-на-главную-страницу-сайта"><a href="#добавление-городов-на-главную-страницу-сайта" class="header-anchor">#</a> Добавление городов на главную страницу сайта</h3> <p>После того, как мы добавили в базу список городов, нам нужно изменить файлы <em>views.py</em> и <em>index.html</em>, чтобы на главной странице нашего сайта отображались все города.</p> <p>Начнём с изменения файла <em>views.py</em>. Импортируем столбец <em>City</em> и сделаем отдельный запрос по API для каждого из городов:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render
<span class="token keyword">import</span> requests
<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> City

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">'http://api.openweathermap.org/data/2.5/weather?q={}&amp;units=imperial&amp;appid=ваш_API_ключ'</span>

    cities <span class="token operator">=</span> City<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#return all the cities in the database</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>Теперь нам нужно сохранить данные для каждого города из списка и передать их в HTML-шаблон. Для этого создадим отдельный список <code>weather_data</code>, в котором будут храниться данные для каждого города.</p> <p>Затем заменим переменную <code>City</code> на <code>cities</code>.</p> <p>После — добавим словарь <code>weather</code> для каждого города в общий список <code>weather_data</code> и в конце немного изменим <code>context</code>, чтобы он передавал весь список в HTML-шаблон, а не только один блок данных.</p> <p>В итоге файл <em>views.py</em> должен прийти к такому виду:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    cities <span class="token operator">=</span> City<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#return all the cities in the database</span>

    weather_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> city <span class="token keyword">in</span> cities<span class="token punctuation">:</span>

        city_weather <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#request the API data and convert the JSON to Python data types</span>

        weather <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'city'</span> <span class="token punctuation">:</span> city<span class="token punctuation">,</span>
            <span class="token string">'temperature'</span> <span class="token punctuation">:</span> city_weather<span class="token punctuation">[</span><span class="token string">'main'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'temp'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'description'</span> <span class="token punctuation">:</span> city_weather<span class="token punctuation">[</span><span class="token string">'weather'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">'icon'</span> <span class="token punctuation">:</span> city_weather<span class="token punctuation">[</span><span class="token string">'weather'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'icon'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>

        weather_data<span class="token punctuation">.</span>append<span class="token punctuation">(</span>weather<span class="token punctuation">)</span> <span class="token comment">#add the data for the current city into our list</span>

    context <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'weather_data'</span> <span class="token punctuation">:</span> weather_data<span class="token punctuation">}</span>

    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'weather/index.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token comment">#returns the index.html template</span>
</code></pre></div><p>Далее, изменим <em>index.html</em> — добавим цикл в отображение данных в шаблоне. Для этого добавим строки <code>{% for weather in weather_data %}</code> и <code>{% endfor %}</code> в начало и конец отображения данных о городах. В итоге, блок отображения данных должен стать таким:</p> <div class="language-html extra-class"><pre class="language-html"><code>...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>column is-offset-4 is-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {% for weather in weather_data %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>media<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>media-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>figure</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image is-50x50<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://openweathermap.org/img/w/{{ weather.icon }}.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Image<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>figure</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>media-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ weather.city }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subtitle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ weather.temperature }}° F<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span> {{ weather.description }}
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    {% endfor %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
...
</code></pre></div><p>Теперь можно проверить, что у нас получилось. В адресной строке браузера адрес нашего сайта. В зависимости от добавленных в список городов, главная страница сайта должна выглядеть примерно так:</p> <p><img src="/spravka/assets/img/weather_app_list.4718effc.png" alt="«django_app»"></p> <h2 id="создание-формы-ввода"><a href="#создание-формы-ввода" class="header-anchor">#</a> Создание формы ввода</h2> <p>Последним, что осталось сделать для нашего сайта — создать форму ввода, чтобы пользователи могли добавлять города прямо с главной страницы сайта.</p> <p>Для этого создадим новый файл <em>forms.py</em> в папке нашего приложения. Содержимое файла будет следующим:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>forms <span class="token keyword">import</span> ModelForm<span class="token punctuation">,</span> TextInput
<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> City

<span class="token keyword">class</span> <span class="token class-name">CityForm</span><span class="token punctuation">(</span>ModelForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> City
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span>
        widgets <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'name'</span><span class="token punctuation">:</span> TextInput<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'class'</span> <span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token string">'placeholder'</span> <span class="token punctuation">:</span> <span class="token string">'City Name'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span> <span class="token comment">#updates the input class to have the correct Bulma class and placeholder</span>
</code></pre></div><p>Это форма ввода нового имени города. Чтобы она заработала, нужно добавить её описание во <em>views.py</em> и передать данные из неё в шаблон.</p> <p>Начнём с изменений во <em>views.py</em></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">from</span> <span class="token punctuation">.</span>forms <span class="token keyword">import</span> CityForm

<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    form <span class="token operator">=</span> CityForm<span class="token punctuation">(</span><span class="token punctuation">)</span>

    weather_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    context <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'weather_data'</span> <span class="token punctuation">:</span> weather_data<span class="token punctuation">,</span> <span class="token string">'form'</span> <span class="token punctuation">:</span> form<span class="token punctuation">}</span>
</code></pre></div><p>Мы добавили описание передачи данных из формы и описали саму форму ввода данных.</p> <p>Теперь изменим  <em>index.html</em></p> <div class="language-html extra-class"><pre class="language-html"><code>...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POST<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {% csrf_token %}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>field has-addons<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>control is-expanded<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{ form.name }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>control<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button is-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                Add City
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
...
</code></pre></div><p>В индексный файл мы добавили блок описания формы и CSRF-токен, необходимый для отправки запросов из Django.</p> <p>После описания формы ввода в шаблоне, нам нужно проверить добавить во <em>views.py</em> блок, который будет отвечать за обработку запросов, отправленных в форме:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">'http://api.openweathermap.org/data/2.5/weather?q={}&amp;units=imperial&amp;appid=ваш_API_ключ'</span>

    cities <span class="token operator">=</span> City<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#return all the cities in the database</span>

    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span> <span class="token comment"># only true if form is submitted</span>
        form <span class="token operator">=</span> CityForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span> <span class="token comment"># add actual request data to form for processing</span>
        form<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># will validate and save if validate</span>

    form <span class="token operator">=</span> CityForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>Здесь мы добавили <code>if</code> для проверки наличия запроса, отправленного из HTML-шаблона. Далее полученные данные сохраняются и передаются в обработку.</p> <p>Сохраните все сделанные изменения и перезагрузите веб-сервер. Теперь можно проверять работу формы для добавления городов. Добавим, например, «Sydney»:</p> <p><img src="/spravka/assets/img/weather_app_sydney.5fa6ea07.png" alt="«django_app»"></p> <h2 id="заключение"><a href="#заключение" class="header-anchor">#</a> Заключение</h2> <p>Мы описали создание сайта на Django с использованием HTML-шаблонов, запросов по API, баз данных и формой для добавления информации в базу данных.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main> <div class="theme-container__footer">
      © <a href="https://jino.ru">Джино</a>, 2003–2022. «Джино» является зарегистрированным товарным знаком.
      <br>
      Лицензия на телематические услуги связи №150549 от 09.03.2017.
    </div></div></div><div class="global-ui"></div></div>
    <script src="/spravka/assets/js/app.f3754d94.js" defer></script><script src="/spravka/assets/js/3.8f3c6525.js" defer></script><script src="/spravka/assets/js/2.6ef13eb6.js" defer></script><script src="/spravka/assets/js/27.5213cd04.js" defer></script><script src="/spravka/assets/js/25.f87373f6.js" defer></script><script src="/spravka/assets/js/48.31f7e6c1.js" defer></script>
  </body>
</html>
